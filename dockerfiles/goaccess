FROM allinurl/goaccess:1.9.3


RUN which crond && \
    rm -rf /etc/periodic

COPY ./dockerfiles/goaccess-files/entrypoint.sh /entrypoint.sh
COPY ./dockerfiles/goaccess-files/catchupLog.sh /catchupLog.sh
COPY ./dockerfiles/goaccess-files/processLogs.sh /processLogs.sh

ENTRYPOINT ["/entrypoint.sh"]

# https://blog.thesparktree.com/cron-in-docker
# source: `docker run --rm -it alpine  crond -h`
# -f | Foreground
# -l N | Set log level. Most verbose 0, default 8
CMD ["crond", "-f", "-l", "2"]
